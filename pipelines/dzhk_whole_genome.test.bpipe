// A short description of the pipeline here

about title: "A pipeline for the DZHK Omics WGS project - works with CRAM files."

inputs "fastq.gz" : "Expecting compressed fastq files (fastq.gz)"

load 'dzhk_whole_genome.config'

// AH81VLADXX_U0b_TGACCA_L002_R1.fastq.gz

run {  "%_*.fastq.gz" * [ 
	pipeline_prepare + "%_%_%_%_R*.fastq.gz" * [ 
		trimmomatic + bwa_pipeline 
	] 
	+ "*.cram" * [ samtools_merge + samtools_index ]
        + [ 
		cram2bam + samtools_index + starling_variant_caller + extract_variants + vcffilter + vep.using(format:"json"),
		manta_variant_caller + vep.using(name:"SV",format:"json"),
		freebayes_parallel.using(procs:16) + vcffilter + vep.using(format:"json")
	]
] }


